# Clicker Clicker Clicker

日常の作業(タイピングとクリック)がそのままゲームの戦力になる、新感覚の自動戦闘ゲーム!

<img width="1195" height="601" alt="image" src="https://github.com/user-attachments/assets/b840e293-3559-4f23-af3f-9a87c9156188" />


### 遊び方

- **キーボードでタイプ** → 弱いユニット生成
- **マウスでクリック** → 中級ユニット生成
- **1分経過** → 強力ユニット自動生成


バックグラウンドでや、タスクバーの上に薄く透過して表示も可能。

---

## ゲーム仕様（詳細）

## コアゲームサイクル

1. 日常作業：ユーザーの日常的なクリックとタイプ（キー入力）が、ゲームに反映され、資源（味方ユニット）が生成される。

2. 自動戦闘：生成された味方ユニットが自動で前線に送られ、敵ユニットと交戦。敵基地を目指して進行する。

3. 勝利と報酬：敵ユニットや敵基地を破壊するとコインを獲得。

4. 強化：獲得したコインでユニットの能力値、基地の防衛力、自動機能などを強化する。

5. 進行：敵基地を破壊するとステージクリアとなり、次のステージへ自動で進む。

## ユニットと生成システム
味方ユニットは、ゲームのウィンドウがアクティブか非アクティブかに関わらず、グローバル入力フックによってカウントされた入力数に応じて生成されます。

ユニット名（仮）,スポーン条件,特徴
味方(小) / キータイプ兵,キーボードタイプ 1回ごと,最も安価で大量生産可能。数で押す。攻撃力・体力は最低
味方(中) / クリック突撃兵,マウスクリック 1回ごと,バランスの取れた中堅ユニット。攻撃力と体力が並。
味方(強) / 時間精鋭部隊,1分ごと（時間ベース）,時間経過で自動生成される強力なユニット。攻撃力・体力が高い。

敵ユニット: ステージに応じて種類と能力値が異なる敵が、一定時間ごとに敵基地から自動スポーンし、味方基地を目指して進行。

戦闘: 味方と敵ユニットは接触すると自動で戦闘を開始。両軍とも、敵基地を先に破壊した方が勝利となる。


## 経済システムと強化（コイン利用）
獲得したコインを使って、以下の要素を恒久的に強化できます。

強化対象,効果
ベース攻撃力,弱・中・強の中から指定した味方ユニットの攻撃力をパーセンテージで増加。
ベース体力,弱・中・強の中から指定した味方ユニットの体力をパーセンテージで増加。
速さ,弱・中・強の中から指定した味方ユニットの移動速度をパーセンテージで増加。
コイン獲得率,敵撃破時、またはステージクリア時の獲得コイン量を増加。
基地体力,自身の基地の耐久度を強化。

自動購入モード：ゲームを放置していても効率的に進行させるための機能です。

コインを消費することで、一定時間指定した強化対象を、コインが貯まったら自動で購入する機能です。


## シングルプレイヤーモード

ステージ形式: 各ステージには独自の敵ユニット構成と基地の防御力が設定されています。

勝利条件: 制限時間内に敵基地を破壊すること。

進行: 勝利すると自動的に次のステージへ。敗北した場合は、再チャレンジ。

エンドレスモード: メインストーリー（ステージ）をクリアした後も、無限に難易度が上がるステージが続く

基本的に、自動で次のステージや再チャレンジを繰り返す。ユーザーがメニューを開いたらそれにあったコマンド(強化購入やモード選択、後記の町構築等)ができる。


## マルチプレイヤーモード

モード名,形式,勝利条件
1 vs 1 基地破壊戦,プレイヤー vs プレイヤー（PVP）,相手の基地を先に破壊したプレイヤーの勝利。
2 vs 2 協力＆対戦,2人チーム vs 2人チーム,チームメイトと協力し、相手チームの基地を破壊。クリック/タイプ数は個人でカウント。
共闘 vs ボス,プレイヤー vs AI（PVE）,複数プレイヤーが協力し、圧倒的な体力を持つ超巨大ボスを倒す。ボス撃破の貢献度で報酬が決定。
ランキング戦,非同期対戦,過去のプレイヤーのユニット生成パターン（ゴースト）と戦い、勝利時間や獲得スコアを競う。

マルチプレイ中も、プレイヤー自身のクリック/タイプ数に応じてユニットが生成されます。

対戦中は、クリック/タイプ数がリアルタイムで対戦相手にも表示され、心理的なプレッシャーをかける要素とします。

また、シングルプレイヤーモードで購入した「強化」はそのまま引き継げ、すべてのモードで強化は共通とします。

## マルチプレイヤーのセットアップ手順

1. **サーバーを起動**  
	```powershell
	cd multiplayer-server
	cargo run --release
	```
	既定では `http://0.0.0.0:8080` で待ち受け、`data/players/` 配下にプレイヤーごとのデータを永続化します。

2. **クライアント側の設定**  
	ゲーム内メニュー → SETTINGS → MULTIPLAYER にて以下を実施します。
	- Step 1: サーバー URL を入力し **TEST SERVER** で疎通確認。
	- Step 2: 任意のプレイヤー名（アカウント名）を入力し **CONNECT / SYNC** を押下。
	- 接続後は同じプレイヤー名でログインした全デバイスが、コイン/ステージ/アップグレードの進行度をリアルタイムで共有します。

3. **同期の挙動**  
	- クライアントは 5 秒ごとにサーバーへ進行度をアップロード。
	- 同期タイミングで他デバイスの更新があれば自動で取り込み、`Last sync` のタイムスタンプに反映されます。
	- アカウント情報（サーバー URL / プレイヤー名 / ID）は設定ファイルに保存され、次回起動時に自動復元されます。

## 町（タウン）システム：経済と補助戦力の拠点

プレイヤーの基地後方に、発展させることが可能な「町」を構築します。このシステムは、クリック/タイプによる最強の戦力を補完し、コインの自動獲得とプレイヤーエンゲージメントを高めることを目的とします。

ただし、「クリック数やタイプ数」が最強の戦力強化手段であることを前提にし、これらはプレイヤーの満足感向上が目的です。よって、得られるものは少なめに設定します。

プレイヤーは獲得したコインを使い、以下の施設を建設・配置できます。

施設名（種類）,機能,収入/効果
商業施設 (Shop/Cafe),自動コイン獲得,時間経過に応じてコインを自動で生成。施設のレベルアップで収入増加。
居住施設 (House/Apart),町人気度の上昇,建設することで「町人気度」が上昇。人気度が高いほど外部からの訪問NPCが増加。訪問NPCは、低確率で短時間、プレイヤーの戦闘をサポートします。
訓練所 (Training),戦力補助（パッシブ強化）,全ユニットの移動速度または体力再生速度など、戦闘を補助するパッシブ効果を永続的に提供。
防衛施設 (Archery/Wall),基地の直接補強,基地の防衛ラインに弓兵（NPC）や壁を配置。基地が攻撃された時のみ機能する補助防衛力。クリック兵には劣るが、防衛に貢献する。


町人気度（タウンアピール）：「町人気度」は、町の発展度、美しさ（装飾品の設置）、施設の配置効率などによって決定されるステータスです。


人気度レベル,効果,プレイヤーメリット
レベル1-10,訪問NPCの増加,商業施設からの自動コイン収入がアップする（商業ブースト）。
レベル11-50,特別な訪問NPC,ごく稀に**「手伝いNPC（Helper NPC）」**が来訪。
レベル51以上,戦意効果,戦意ゲージが追加される。プレイヤーが作業（クリック/タイプ）をする際に、戦意ゲージが溜まりやすくなる。ゲージ満タンで一時的にスポーン効率が倍増。

戦力バランス: 弓兵の攻撃力は、プレイヤーのクリック/タイプで生成されるユニットの攻撃力には遠く及ばないように設定し、「最強の戦力はあくまでプレイヤーの作業」というコアコンセプトを崩さないようにします。
